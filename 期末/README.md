# Tabu Search（禁忌搜尋演算法）  
## 什麼是Tabu Search： 
#### 先從爬山演算法說起  
  算法從當前的節點開始，和周圍的鄰居節點的值進行比較。 如果當前節點是最大的，那麽返回當前節點，作為最大值 (既山峰最高點)；反之就用最高的鄰居節點來，替換當前節點，從而實現向山峰的高處攀爬的目的。如此循環直到達到最高點。因為不是全面搜索，所以結果可能不是最佳。  
#### 再到局部搜索演算法  
  局部搜索算法是從爬山法改進而來的。局部搜索算法的基本思想：在搜索過程中，始終選擇當前點的鄰居中與離目標最近者的方向搜索。同樣，局部搜索得到的解不壹定是最優解。  
#### 然後到Tabu Search  
為了找到“全局最優解”，就不應該執著於某壹個特定的區域。於是人們對局部搜索進行了改進，得出了禁忌搜索算法。
禁忌（Tabu Search）算法是壹種亞啟發式(meta-heuristic)隨機搜索算法，它從壹個初始可行解出發，選擇壹系列的特定搜索方向（移動）作為試探，選擇實現讓特定的目標函數值變化最多的移動。為了避免陷入局部最優解，TS搜索中采用了壹種靈活的“記憶”技術，對已經進行的優化過程進行記錄和選擇，指導下壹步的搜索方向，這就是Tabu表的建立。  
#### 最後打個比方  
為了找出地球上最高的山，壹群有誌氣的兔子們開始想辦法。
1) 爬山算法
兔子朝著比現在高的地方跳去。他們找到了不遠處的最高山峰。但是這座山不壹定是珠穆朗瑪峰。這就是爬山法，它不能保證局部最優值就是全局最優值。

2) 禁忌搜索算法
兔子們知道壹個兔的力量是渺小的。他們互相轉告著，哪裏的山已經找過，並且找過的每壹座山他們都留下壹只兔子做記號。他們制定了下壹步去哪裏尋找的策略。這就是禁忌搜索。  
### TS演算法基本思想  
標記已經解得的局部最優解或求解過程，並在進壹步的叠代中避開這些局部最優解或求解過程。局部搜索的缺點在於，太過於對某壹局部區域以及其鄰域的搜索，導致壹葉障目。為了找到全局最優解，禁忌搜索就是對於找到的壹部分局部最優解，有意識地避開它，從而或得更多的搜索區域。

比喻：兔子們找到了泰山，它們之中的壹只就會留守在這裏，其他的再去別的地方尋找。就這樣，壹大圈後，把找到的幾個山峰壹比較，珠穆朗瑪峰脫穎而出。
## 實現  
（1）給定壹個禁忌表（Tabu List）H=null,並選定壹個初始解X_now.  
（2）如果滿足停止規則，則停止計算，輸出結果；  
否則算法繼續進行  
（3）在X_now的領域中選出候選集N(X_now)，找出N個最優解作為候選解C（X_now）  
（4）如果C中禁忌的候選解滿足特赦原則，則把該解當做當前最優解X_next；  
否則，求出C中非禁忌的最優解X_next  
（5） 如果X_next<X_now，則更新X_now=X_next  
更新歷史記錄H, 將X_next加入禁忌表。  
（6）重復步驟（2）.   
### 哪些因素會影響搜索性能：  
#### 禁忌表  
禁忌表包括禁忌對象和禁忌長度。由於在每次對當前解的搜索中，需要避免壹些重復的步驟，因此將某些元素放入禁忌表中，這些元素在下次搜索時將不會被考慮，這些被禁止搜索的元素就是禁忌對象；
禁忌長度則是被禁對象不允許選取的叠代次數，若設置的太多則可能會造成耗時較長或者算法停止，若太少則會造成重復搜索。  
#### 特赦規則  
通俗定義：對於在禁忌的對象，如果出現以下情況，不論現在對象的禁忌長度如何，均設為0：
（1）基於評價值的規則，若出現壹個解的目標值好於前面任何壹個最佳候選解，可特赦；  
（2）基於最小錯誤的規則，若所有對象都被禁忌，特赦壹個評價值最小的解；  
（3）基於影響力的規則，可以特赦對目標值影響大的對象。 
#### 候选集  
候選集的大小，過大增加計算內存和計算時間，過小過早陷入局部最優。候選集的選擇壹般由鄰域中的鄰居組成，可以選擇所有鄰居，也可以選擇表現較好的鄰居，還可以隨機選擇幾個鄰居。  
#### 評價函數  
評價函數分為直接評價函數和間接評價函數。  
直接評價函數：上述例子，均直接使用目標值作為評價函數。  
間接評價函數：反映目標函數特性的函數（會比目標函數的計算更為簡便，用以減少計算時間等）。  
#### 終止規則  
禁忌算法是壹個啟發式算法，我們不可能讓搜索過程無窮進行，所以壹些直觀的終止規則就出現了  
（1）確定步數終止，無法保證解的效果，應記錄當前最優解；  
（2）頻率控制原則，當某壹個解、目標值或元素序列的頻率超過壹個給定值時，終止計算；  
（3）目標控制原則，如果在壹個給定步數內，當前最優值沒有變化，可終止計算。  


